{% extends "base.html" %}
{% import "_macros.html" as macros %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}首页{% endblock %}

{% block content %}
    <script src="{{ url_for('static', filename='echarts.min.js') }}"></script>
 <!-- Bootstrap core CSS -->
    <link href="bootstrap-3.3.7/docs/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="bootstrap-3.3.7/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="bootstrap-3.3.7/docs/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="bootstrap-3.3.7/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap-3.3.7/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->

<style>
body {
  padding-top: 50px;
}
.sub-header {
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
}

/*
 * Top navigation
 * Hide default border to remove 1px line.
 */
.navbar-fixed-top {
  border: 0;
}
/* Hide for mobile, show later */
.sidebar {

}
@media (min-width: 200px) {
  .sidebar {
    position: fixed;
    top: 51px;
    bottom: 0;
    left: 0;
    z-index: 1000;
    display: block;
    padding: 20px ;
    overflow-x: hidden;
    overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
    background-color: #f5f5f5;
    border-right: 1px solid #eee;
  }
}
/* Sidebar navigation */
.nav-sidebar {
  margin-right: -21px; /* 20px padding + 1px border */
  margin-bottom: 20px;
  margin-left: -20px;
}
.nav-sidebar > li > a {
  padding-right: 20px;
  padding-left: 20px;
}
.nav-sidebar > .active > a,
.nav-sidebar > .active > a:hover,
.nav-sidebar > .active > a:focus {
  color: #fff;
  background-color: #428bca;
}
.main {
  padding: 20px;
}
@media (min-width: 768px) {
  .main {
    padding-right: 40px;
    padding-left: 40px;
  }
}
.main .page-header {
  margin-top: 0;
}
.placeholders {
  margin-bottom: 30px;
  text-align: center;
}
.placeholders h4 {
  margin-bottom: 0;
}
.placeholder {
  margin-bottom: 20px;
}
.placeholder img {
  display: inline-block;
  border-radius: 50%;
}
</style>

<div class="container-fluid">
      <div class="row">

          <div class="  col-xs-2 col-sm-3 col-md-2 sidebar ">
            <ul class=" nav nav-sidebar">
            <li><a href="{{ url_for('main.index') }}">高校信息</a></li>
            <li><a href="{{ url_for('ji.indexji') }}">基础教育</a></li>
                <br />
                {{ wtf.quick_form(form) }}
              <br />
              {{ wtf.quick_form(form1) }}
          </ul>

        </div>
</div>
</div>
    <div class="visible-xs-block"></div>

    <div class="  col-xs-12 col-xs-offset-8 col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h2 class="page-header">全国高校信息</h2>
    <div class="row placeholders">
            <div class="col-xs-6 col-sm-3 placeholder">
 <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
<table>
    <tr>
        <td>
<!--     <div id="main" style="width: 600px;height:400px;"></div>

<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '各省份高校网站v6可访问的数量'
            },
            tooltip: {},
            legend: {
                data:['count']
            },
            xAxis: {
                data: ["北京市","天津市","上海市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省",
                    "浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省",
                    "四川省","贵州省","云南省","陕西省","甘肃省","青海省","台湾省","内蒙古自治区","广西壮族自治区",
                    "西藏自治区","宁夏回族自治区","新疆维吾尔自治区","香港特别行政区","澳门特别行政区"]
            },
            yAxis: {},
            series: [{
                name: 'count',
                type: 'bar',
                data: [323, 46,538,107, 60, 0,321,86,20,82,165,843,253,86,454,419,388,127,648,63,92,232,0,185,65,0,0,0,199,0,1,1,0,0]
            }]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>-->

            <div id="main2" style="width: 500px;height:400px;"></div>
                <script type="text/javascript">
                    var myChart2 = echarts.init(document.getElementById('main2'));
var   option2 = {
                title : {
                    text: '各省份高校网站v6测试',
                    subtext: '测试结果'
                },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                data:['网站总数','v6数目']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {show: true, type: ['line', 'bar']},
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    boundaryGap : false,
                    data : ["北京市","天津市","上海市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省",
                    "浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省",
                    "四川省","贵州省","云南省","陕西省","甘肃省","青海省","台湾省","内蒙古自治区","广西壮族自治区",
                    "西藏自治区","宁夏回族自治区","新疆维吾尔自治区","香港特别行政区","澳门特别行政区"]
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    axisLabel : {
                        formatter: '{value}'
                    }
                }
            ],
            series : [
                {
                    name:'网站总数',
                    type:'line',
                    data:[6334,1894,5945,2102,1825,840,2817,2460,1452,12290,4047,3321,2903,1958,5191,4437,4532,2562,6727,324,3957,1449,1302,
                        4377,1615,214,0,815,2984,22,279,445,0,0],
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name: '平均值'}
                        ]
                    }
                },
                {
                    name:'v6数目',
                    type:'line',
                    data:[{{pro['北京市']}},{{pro['天津市']}},{{pro['上海市']}},{{pro['重庆市']}},{{pro['河北省']}},{{pro['山西省']}},{{pro['辽宁省']}},
                          {{pro['吉林省']}},{{pro['黑龙江省']}},{{pro['江苏省']}},{{pro['浙江省']}},{{pro['安徽省']}},{{pro['福建省']}},
                          {{pro['江西省']}},{{pro['山东省']}},{{pro['河南省']}},{{pro['湖北省']}},{{pro['湖南省']}},{{pro['广东省']}},
                          {{pro['海南省']}},{{pro['四川省']}},{{pro['贵州省']}},{{pro['云南省']}},{{pro['陕西省']}},{{pro['甘肃省']}},
                          {{pro['青海省']}},{{pro['台湾省']}},{{pro['内蒙古自治区']}},{{pro['广西壮族自治区']}},{{pro['西藏自治区']}},
                          {{pro['宁夏回族自治区']}},{{pro['新疆维吾尔自治区']}},{{pro['香港特别行政区']}},{{pro['澳门特别行政区']}}],
                    markPoint : {
                        data : [
                            {name : '最低', value : -2, xAxis: 1, yAxis: -1.5}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name : '平均值'}
                        ]
                    }
                }
            ]
        };
myChart2.setOption(option2);
</script>
        </td>
        <td>
        <div id="main3" style="width: 400px;height:300px;"></div>
                <script type="text/javascript">
                    var myChart3 = echarts.init(document.getElementById('main3'));
                        var   option3 = {
            title : {
                text: '全国高校v6测试',
                subtext: 'v6占比',
                x:'center'
            },
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient : 'vertical',
                x : 'left',
                data:['v6网站数','非v6网站数']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {
                        show: true,
                        type: ['pie', 'funnel'],
                        option: {
                            funnel: {
                                x: '25%',
                                width: '50%',
                                funnelAlign: 'left',
                                max: 1548
                            }
                        }
                    },
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : true,


            series : [
                {
                    name:'全国v6测试',
                    type:'pie',
                    radius : '55%',
                    center: ['50%', '60%'],
            label: {
                        normal: {
                            show: true,
                            formatter: '{b} \n {c}({d}%)'
                        }
                    },
                    data:[
                        {value:{{Count1}}, name:'v6网站数'},
                        {value:{{Count}}-{{Count1}}, name:'非v6网站数'}
                    ]
                }
            ]
        };
        myChart3.setOption(option3);
        </script>
    </td>
    <td>

        <div id="main4" style="width: 400px;height:300px;"></div>

<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart4 = echarts.init(document.getElementById('main4'));
        var   option4 = {
                title : {
                    text: '每月v6可访问数',
                    subtext: '测试结果'
                },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                data:['v6网站数量']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {show: true, type: ['line', 'bar']},
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    boundaryGap : false,
                    data : ['4月','5月','6月','7月']
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    axisLabel : {
                        formatter: '{value}'
                    }
                }
            ],
            series : [
                {
                    name:'v6网站数量',
                    type:'line',
                    label: {
                normal: {
                    show: true,
                        position: 'top'
                }
                },
                    data:[5846,5846, 6293,{{Count1|tojson}}],
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name: '平均值'}
                        ]
                    }
                }
            ]
        };
        myChart4.setOption(option4);
</script>
    </td>
    </tr>

</table>
          </div>
        </div>
    <div>全国获取的高校网站一共有{{Count}},其中有{{Count1}}个部署了ipv6</div>
{% if pagination %}
<div class="pagination container custom-container-width nopadding">
    {{ macros.pagination_widget(pagination, '.index') }}
</div>
{% endif %}
<div class="container m-0 text-center custom-container-width">
    <table class="table table-striped table-hover row m-0">
        <thead class="w-100">
        <tr class="row m-0" style="height: 100px; overflow:auto;">
            <td class="col-md-2"><strong>单位</strong></td>
            <td class="col-md-4"><strong>URL</strong></td>
            <td class="col-md-1"><strong>http/IPv4</strong></td>
            <td class="col-md-1"><strong>https/IPv4</strong></td>
            <td class="col-md-1"><strong>http2/IPv4</strong></td>
            <td class="col-md-1"><strong>http/IPv6</strong></td>
            <td class="col-md-1"><strong>https/IPv6</strong></td>
            <td class="col-md-1"><strong>http2/IPv6</strong></td>
        </tr>
        </thead>
        <tbody class="w-100">
        {% for i in content %}
            <tr class="row m-0" style="height: 100px; overflow:auto;">
                <td class="col-md-2">{{ i[0] }}</td>
                <td class="col-md-4"><a href="{{ i[1] }}" target="_blank">{{ i[1] }}</a></td>
                <td class="col-md-1">{{ i[2] }}</td>
                <td class="col-md-1">{{ i[3] }}</td>
                <td class="col-md-1">{{ i[4] }}</td>
                <td class="col-md-1">{{ i[5] }}</td>
                <td class="col-md-1">{{ i[6] }}</td>
                <td class="col-md-1">{{ i[7] }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% if pagination %}
<div class="pagination container custom-container-width nopadding">
    {{ macros.pagination_widget(pagination, '.index') }}
</div>
{% endif %}
</div>

{% endblock %}